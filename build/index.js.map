{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./src/components/SalesByRegionReport/SalesByRegionReport.js","webpack:///./src/index.js","webpack:///./src/index.scss","webpack:///./src/mockData.js","webpack:///external [\"wc\",\"components\"]","webpack:///external [\"wc\",\"currency\"]","webpack:///external [\"wc\",\"date\"]","webpack:///external [\"wc\",\"wcSettings\"]","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///external [\"wp\",\"element\"]","webpack:///external [\"wp\",\"hooks\"]","webpack:///external [\"wp\",\"i18n\"]"],"names":["SalesByRegionReport","ReactComponent","constructor","props","dateQuery","createDateQuery","query","console","log","storeCurrency","Currency","storeCurrencySetting","state","currency","allCountries","data","loading","fetchData","handleDateChange","bind","getQueryParameters","prepareData","getOrdersWithCountries","getTotalNumber","setState","endPoints","queryParameters","countriesPath","countries","ordersPath","orders","customersPath","customers","Promise","all","length","apiFetch","path","resolve","then","catch","err","test1","test2","afterDate","encodeURIComponent","appendTimestamp","primaryDate","after","beforeDate","before","property","propertyTotal","reduce","accumulator","currentObject","Math","round","map","order","country_code","find","item","id","customer_id","country","code","name","__","getPerCountryData","ordersWithCountries","countryCode","countryObjectTemplate","push","countryIndexInAccumulator","findIndex","sales","total_sales","totals","sales_percentage","average_order_value","period","compare","getDateParamsFromQuery","primary","secondary","secondaryDate","getCurrentDates","newQuery","newDateQuery","render","reportFilters","isoDateFormat","addFilter","reports","report","title","component","mockData"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import {Component as ReactComponent, Fragment} from '@wordpress/element';\r\nimport {mockData} from '../../mockData';\r\n\r\nimport {ChartPlaceholder, ReportFilters, SummaryList, SummaryListPlaceholder, SummaryNumber, TablePlaceholder} \r\nfrom '@woocommerce/components';\r\nimport {__} from '@wordpress/i18n';\r\nimport {appendTimestamp, getCurrentDates, getDateParamsFromQuery, isoDateFormat} from '@woocommerce/date';\r\nimport {default as Currency} from '@woocommerce/currency';\r\nimport {CURRENCY as storeCurrencySetting} from '@woocommerce/settings'; \r\nimport apiFetch from '@wordpress/api-fetch';     \r\n\r\nexport class SalesByRegionReport extends ReactComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        const dateQuery = this.createDateQuery(this.props.query);\r\n        console.log(\"dateQuery\", dateQuery);\r\n        const storeCurrency = new Currency(storeCurrencySetting);\r\n        this.state = {\r\n            dateQuery: dateQuery,\r\n            currency: storeCurrency,\r\n            allCountries: [],\r\n            data: { loading: true }\r\n        };\r\n        this.fetchData(this.state.dateQuery);\r\n        this.handleDateChange = this.handleDateChange.bind(this);\r\n        this.getQueryParameters = this.getQueryParameters.bind(this);\r\n        this.prepareData = this.prepareData.bind(this);\r\n        this.getOrdersWithCountries = this.getOrdersWithCountries.bind(this);\r\n        this.getTotalNumber = this.getTotalNumber.bind(this);\r\n        \r\n\r\n        \r\n    }\r\n\r\n    fetchData(dateQuery) {\r\n        if(!this.state.data.loading) this.setState({data: {loading: true}});\r\n        const endPoints = {\r\n            'countries': '/wc/v3/data/countries?_fields=code,name',\r\n            'orders': '/wc-analytics/reports/orders?_fields=order_id,date_created,date_created_gmt,customer_id,total_sales',\r\n            'customers': '/wc-analytics/reports/customers?_fields=id,country'\r\n        };\r\n        const queryParameters = this.getQueryParameters(dateQuery);\r\n        const countriesPath = endPoints.countries;\r\n        const ordersPath = endPoints.orders + queryParameters;\r\n        const customersPath = endPoints.customers + queryParameters;\r\n        Promise.all([\r\n            this.state.allCountries.length === 0 ? apiFetch({path: countriesPath}) : Promise.resolve(this.state.allCountries),\r\n            apiFetch({path: ordersPath}),\r\n            apiFetch({path: customersPath})\r\n        ])\r\n            .then(([countries, orders, customers]) => {\r\n                console.log(\"fetched Data\", countries, orders, customers);\r\n                const data = this.prepareData(countries, orders, customers);\r\n                console.log(\"processed Data\", data);\r\n                this.setState({data: data, allCountries: countries})\r\n            })\r\n            .catch(err => console.log(err));\r\n            console.log(\"fetched data\", this.state.data);\r\n            console.log(\"paths\", endPoints);\r\n            //test endpoints\r\n            const test1 = \"/wc-analytics/reports/orders\";\r\n            apiFetch({path: test1}).then((data) =>\r\n                {\r\n                    console.log(\"test1\", data)    \r\n                }\r\n            )\r\n            const test2 = \"/wc-analytics/reports/orders/4608\";\r\n            apiFetch({path: test2}).then((data) =>\r\n                {\r\n                    console.log(\"test2\", data)    \r\n                }\r\n            )\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    getQueryParameters(dateQuery) {\r\n        const afterDate = encodeURIComponent(appendTimestamp(dateQuery.primaryDate.after, 'start'));\r\n        const beforeDate = encodeURIComponent(appendTimestamp(dateQuery.primaryDate.before, 'end'));\r\n        return `&after=${afterDate}&before=${beforeDate}&interval=day&order=asc&per_page=100&_locale=user`;\r\n    }\r\n\r\n    getTotalNumber(data, property) {\r\n        const propertyTotal = data.reduce((accumulator, currentObject) => accumulator + currentObject[property], 0);\r\n        return Math.round(propertyTotal * 100) / 100;\r\n    }\r\n\r\n    getOrdersWithCountries(orders, customers, countries) {\r\n        return orders.map(order => {\r\n            order.country_code = customers.find(item => item.id === order.customer_id).country;\r\n            const country = countries.find(item => item.code === order.country_code);\r\n            order.country = country ? country.name : __('Unknown country', 'wc-admin-sales-by-country');\r\n            return order;\r\n        });\r\n    }\r\n\r\n    getPerCountryData(ordersWithCountries) {\r\n        console.log(\"getPerCountryData\", ordersWithCountries);\r\n        return ordersWithCountries.reduce((accumulator, currentObject) => {\r\n            const countryCode = currentObject['country_code'];\r\n            if (!accumulator.countries) accumulator.countries = [];\r\n            if (!accumulator.countries.find(item => item.country_code === countryCode)) {\r\n                const countryObjectTemplate = {\r\n                    'country': currentObject['country'],\r\n                    'country_code': countryCode,\r\n                    'sales': 0,\r\n                    'sales_percentage': 0,\r\n                    'orders': 0,\r\n                    'average_order_value': 0\r\n                };\r\n                accumulator.countries.push(countryObjectTemplate)\r\n            }\r\n            const countryIndexInAccumulator = accumulator.countries.findIndex(item => item.country_code === countryCode);\r\n            accumulator.countries[countryIndexInAccumulator].sales += currentObject.total_sales;\r\n            accumulator.countries[countryIndexInAccumulator].orders++;\r\n            return accumulator;\r\n        }, {});\r\n    }\r\n\r\n    prepareData(countries, orders, customers) {\r\n        let data;\r\n        if (orders.length > 0) {\r\n            const ordersWithCountries = this.getOrdersWithCountries(orders, customers, countries);\r\n            data = this.getPerCountryData(ordersWithCountries);\r\n            console.log(\"data\", data);\r\n            data.totals = {\r\n                total_sales: this.getTotalNumber(data.countries, 'sales'),\r\n                orders: this.getTotalNumber(data.countries, 'orders'),\r\n                countries: data.countries.length,\r\n            };\r\n            data.countries = data.countries.map(country => {\r\n                country.sales_percentage = Math.round(country.sales / data.totals.total_sales * 10000) / 100;\r\n                country.average_order_value = country.sales / country.orders;\r\n                return country;\r\n            });\r\n        } else {\r\n            data = {\r\n                countries: [],\r\n                totals: {\r\n                    total_sales: 0,\r\n                    orders: 0,\r\n                    countries: 0\r\n                }\r\n            }\r\n        }\r\n        data.loading = false;\r\n        return data;\r\n    }\r\n\r\n    createDateQuery(query) {\r\n        console.log(\"query1\", query);\r\n        const {period, compare, before, after} = getDateParamsFromQuery(query);\r\n        const {primary: primaryDate, secondary: secondaryDate} = getCurrentDates(query);\r\n        return {period, compare, before, after, primaryDate, secondaryDate};\r\n    }\r\n\r\n    handleDateChange(newQuery) {\r\n        console.log(\"debug2\"  , this, newQuery);\r\n        const newDateQuery = this.createDateQuery(newQuery);\r\n        this.setState({dateQuery: newDateQuery});\r\n        //this.fetchData(newDateQuery);\r\n    }\r\n\r\n    \r\n\r\n    render() {\r\n\r\n   \r\n        console.log(\"rendering\", \"props\", this.props,);\r\n        console.log(\"rendering\", \"state\",this.state);\r\n        const reportFilters =\r\n            <ReportFilters\r\n                dateQuery={this.state.dateQuery}\r\n                query={this.props.query}\r\n                path={this.props.path}\r\n                currency={this.state.currency}\r\n                isoDateFormat={isoDateFormat}\r\n                onDateSelect={this.handleDateChange}\r\n                />;\r\n\r\n        const {data, currency} = this.state;\r\n        if (this.state.data.loading) \r\n        { \r\n            return <p>Waiting...</p> \r\n        }\r\n        else \r\n        {\r\n            return <Fragment>\r\n                {reportFilters}\r\n                <SummaryList>\r\n                    {() => [\r\n                        <SummaryNumber key='sales'\r\n                                        value={currency.render(data.totals.total_sales)}\r\n                                        label={__('Total Sales', 'sales-by-region')}/>,\r\n                        <SummaryNumber key='countries'\r\n                                        value={data.totals.countries}\r\n                                        label={__('Countries', 'sales-by-region')}/>,\r\n                        <SummaryNumber key='orders'\r\n                                        value={data.totals.orders}\r\n                                        label={__('Orders', 'sales-by-region')}/>\r\n                    ]}\r\n                </SummaryList>\r\n            </Fragment>\r\n        }\r\n    }\r\n}","// Import SCSS entry file so that webpack picks up changes\r\nimport './index.scss';\r\nimport {addFilter} from '@wordpress/hooks';\r\nimport {__} from '@wordpress/i18n';\r\nimport {Component as ReactComponent} from '@wordpress/element';\r\nimport {SalesByRegionReport} from \"./components/SalesByRegionReport/SalesByRegionReport\";\r\n\r\nconsole.log( 'hello world' );\r\n\r\n\r\n\r\n//https://developer.wordpress.org/block-editor/reference-guides/packages/packages-hooks/#api-usage\r\naddFilter('woocommerce_admin_reports_list', 'sales-by-region', (reports) => {\r\n    return [\r\n        ...reports,\r\n        {\r\n            report: 'sales-by-region',\r\n            title: __('Sales by Region', 'sales-by-region'),\r\n            component: SalesByRegionReport\r\n        },\r\n    ];\r\n});\r\n","// extracted by mini-css-extract-plugin\nexport {};","export const mockData = {\r\n    \"countries\": [\r\n        {\r\n            \"country\": \"France\",\r\n            \"country_code\": \"FR\",\r\n            \"sales\": 33023.23,\r\n            \"sales_percentage\": 50.37,\r\n            \"orders\": 4,\r\n            \"average_order_value\": 8255.8075\r\n        },\r\n        {\r\n            \"country\": \"South Korea\",\r\n            \"country_code\": \"KR\",\r\n            \"sales\": 3760.72,\r\n            \"sales_percentage\": 5.73,\r\n            \"orders\": 1,\r\n            \"average_order_value\": 3760.72\r\n        },\r\n        {\r\n            \"country\": \"Canada\",\r\n            \"country_code\": \"CA\",\r\n            \"sales\": 1957.3,\r\n            \"sales_percentage\": 2.98,\r\n            \"orders\": 6,\r\n            \"average_order_value\": 326.27\r\n        },\r\n        {\r\n            \"country\": \"Russia\",\r\n            \"country_code\": \"RU\",\r\n            \"sales\": 607.44,\r\n            \"sales_percentage\": 0.92,\r\n            \"orders\": 3,\r\n            \"average_order_value\": 202.48\r\n        },\r\n        {\r\n            \"country\": \"Croatia\",\r\n            \"country_code\": \"HR\",\r\n            \"sales\": 26225.58,\r\n            \"sales_percentage\": 40.00,\r\n            \"orders\": 2,\r\n            \"average_order_value\": 13112.79\r\n        }\r\n    ],\r\n    \"totals\": {\r\n        \"total_sales\": 65574.27,\r\n        \"orders\": 16,\r\n        \"countries\": 5\r\n    },\r\n    \"loading\": false\r\n};// JavaScript Document\r\n","(function() { module.exports = window[\"wc\"][\"components\"]; }());","(function() { module.exports = window[\"wc\"][\"currency\"]; }());","(function() { module.exports = window[\"wc\"][\"date\"]; }());","(function() { module.exports = window[\"wc\"][\"wcSettings\"]; }());","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());","(function() { module.exports = window[\"wp\"][\"hooks\"]; }());","(function() { module.exports = window[\"wp\"][\"i18n\"]; }());"],"sourceRoot":""}